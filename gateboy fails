// clock phase is ~119.21 nsec (4.194304 mhz crystal)
// hsync seems consistently 3.495 - 3.500 us (29 phases?)
// hsync to bogus clock pulse 1.465 us
// data changes on rising edge of lcd clock
// hsync should go low the same phase that lcd clock goes high
// vsync 108.720 usec - right on 912 phases


data lines change a few ns after clock goes high
hsync goes low and clock goes high at the same time
17.96 us between vsync going high and hsync going high
17.965 us between vsync going low and hsync going high
hsync pulse 3.495 usec
2.035 us between first isolated clock pulse and rest of pulses
during sprite fetch, clock high for 2.745 us

latch and altsig go low at the same time
0.470 us from latch low to vsync low
18.430 us from latch low to hsync high


first clock posedge to last clock posedge 37.665 us
10 clock ticks = 2.380 us = 0.238
40 clock ticks = 9.530 us = 0.23825
90 clock ticks = 21.450 us = 0.238333333333333 us
100 clock ticks = 23.835 us = 0.23835
150 clock ticks = 35.760 = 0.2384

159 total clock pulses in main line section not including glitch pulse during hsync

//----------
// PPU

line_153_ly_c.gb
  ly doesn't change until phase C after the read

ppu_sprite0_scx3_a.gb
  read happens waaaay after we hit hblank, wtf
  dmg pass, ags fail
ppu_sprite0_scx7_a.gb
  dmg pass, ags fail

//----------
// STAT

poweron_006_stat.gb
  dmg pass, ags fail
  dunno, read happens a phase or two before stat changes
poweron_120_stat.gb
  dmg pass, ags fail

lcdon_to_stat2_a.gb
  dmg pass, ags fail
  read happens well before lyc goes 0

stat_write_glitch_l0_a.gb
  dmg pass, ags fail
stat_write_glitch_l0_b.gb
  dmg pass, ags fail
stat_write_glitch_l1_b.gb
  dmg pass, ags fail
stat_write_glitch_l1_c.gb
  dmg pass, ags fail

//----------
// OAM

oam_read_l0_d.gb
  dmg pass, ags pass
  PIN_OAM_OEp high way before AMAB_CPU_OEM_ENp

oam_read_l1_a.gb
  dmg pass, ags pass

oam_read_l1_f.gb
  dmg pass, ags pass

oam_write_l0_b.gb
  dmg pass, ags pass
  the write should _not_ go through
  CPU_WRp hitting two passes before XYMU goes high

oam_write_l0_d.gb
  dmg pass, ags pass
  CPU_WRp goes low before rendering finishes

oam_write_l1_c.gb
  dmg pass, ags fail
  CPU_WRp pulse happens too far before the scan/render gap

lcdon_to_oam_unlock_d.gb
  dmg pass, ags pass
  should PIN_OAM_OE be low on EFGH?

poweron_006_oam.gb
  dmg pass, ags fail
poweron_120_oam.gb
  dmg pass, ags fail
poweron_234_oam.gb
  dmg pass, ags fail

//----------
// VRAM

poweron_026_vram.gb
  dmg pass, ags fail
poweron_140_vram.gb
  dmg pass, ags fail

//----------
// MEALYBUG

m3_bgp_change.gb
  

m3_lcdc_obj_en_change.gb
  rightmost pixel of each sprite getting cut off

m3_lcdc_obj_en_change_variant.gb
  rightmost pixel of each sprite getting cut off
  rightmost column wrong
  
m3_lcdc_obj_size_change.gb
  one glyph in top left wrong

m3_lcdc_obj_size_change_scx.gb
  two glyphs in right column wrong

m3_lcdc_win_en_change_multiple_wx.gb
  tiny off-by-one pixels

m3_bgp_change_sprites.gb
  stripes off by one, probably pixel ORing

m3_lcdc_bg_en_change.gb
  stripes off by one, probably pixel ORing





m3_obp0_change.gb  pass!
m3_lcdc_bg_map_change.gb  pass!
m3_lcdc_tile_sel_change.gb  pass!
m3_lcdc_tile_sel_win_change.gb  pass!
m3_lcdc_win_en_change_multiple.gb  pass!
m3_lcdc_win_map_change.gb  pass!
m3_scx_low_3_bits.gb  pass!
m3_window_timing.gb  pass!
m3_window_timing_wx_0.gb  pass!
m3_wx_4_change.gb  pass!
m3_wx_4_change_sprites.gb  pass!
m3_wx_5_change.gb  pass!
m3_wx_6_change.gb  pass!